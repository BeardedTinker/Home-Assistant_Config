#####
# Nuki Alternative integration
# https://gist.github.com/alexdelprete/296f50a4e5b35c0ea4bbed99a7420f5e
#####

platform: template
sensors:
  nuki_bridge_lock_bt_state:
    unique_id: nuki_bridge_lock_bt_state
    device_class: connectivity
    friendly_name: "Nuki Bridge<->Lock BT State"
    icon_template: >
      {% if states('input_number.nuki_bt_state') | int == 1 %}
        mdi:bluetooth-connect
      {% elif states('input_number.nuki_bt_state') | int == 2 %}
        mdi:bluetooth-off
      {% else %}
        mdi:bluetooth-audio
      {% endif %}
    value_template: >
      {{ state_attr('sensor.nuki_bridge_endpoint_info','scanResults')[0]['paired'] if states('sensor.nuki_bridge_endpoint_info') != "unknown" }}
