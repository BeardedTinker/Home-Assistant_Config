"use strict";(self.webpackChunkhacs_frontend=self.webpackChunkhacs_frontend||[]).push([[2775],{32775:function(e,t,n){var i=n(22858).A,a=n(33994).A;n.a(e,function(){var e=i(a().mark((function e(t,i){var r,s,o,l,u,d,c,h,f,y,v,p,m,k,_,g,b,A,x,w,M,C,Z,z,D,S,B,E,O,I,P,j,q,F,W,L,U,V,$,T,R;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n(41981),s=n(64599),o=n(33994),l=n(22858),u=n(35806),d=n(71008),c=n(62193),h=n(2816),f=n(27927),y=n(81027),n.n(y),v=n(13025),n.n(v),p=n(82386),n.n(p),m=n(97741),n.n(m),k=n(89655),n.n(k),_=n(33231),n.n(_),g=n(26098),n.n(g),b=n(10507),n.n(b),A=n(39790),n.n(A),x=n(36604),n.n(x),w=n(92765),n.n(w),M=n(79641),n.n(M),C=n(253),n.n(C),Z=n(2075),n.n(Z),z=n(16891),n.n(z),n(27783),D=n(66360),S=n(29818),B=n(94100),E=n(50880),O=n(31134),I=n(81523),P=n(11605),j=n(98969),n(58715),n(83859),n(5686),q=n(82739),F=n(23680),W=n(29371),L=n(884),!(U=t([j])).then){e.next=64;break}return e.next=60,U;case 60:e.t1=e.sent,e.t0=(0,e.t1)(),e.next=65;break;case 64:e.t0=U;case 65:j=e.t0[0],R="___create-new-entity___",(0,f.A)([(0,S.EM)("ha-entity-picker")],(function(e,t){var n,i,a=function(t){function n(){var t;(0,d.A)(this,n);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=(0,c.A)(this,n,[].concat(a)),e(t),t}return(0,h.A)(n,t),(0,u.A)(n)}(t);return{F:a,d:[{kind:"field",decorators:[(0,S.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Boolean})],key:"autofocus",value:function(){return!1}},{kind:"field",decorators:[(0,S.MZ)({type:Boolean})],key:"disabled",value:function(){return!1}},{kind:"field",decorators:[(0,S.MZ)({type:Boolean})],key:"required",value:function(){return!1}},{kind:"field",decorators:[(0,S.MZ)({type:Boolean,attribute:"allow-custom-entity"})],key:"allowCustomEntity",value:void 0},{kind:"field",decorators:[(0,S.MZ)()],key:"label",value:void 0},{kind:"field",decorators:[(0,S.MZ)()],key:"value",value:void 0},{kind:"field",decorators:[(0,S.MZ)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array})],key:"createDomains",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array,attribute:"include-unit-of-measurement"})],key:"includeUnitOfMeasurement",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array,attribute:"include-entities"})],key:"includeEntities",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Array,attribute:"exclude-entities"})],key:"excludeEntities",value:void 0},{kind:"field",decorators:[(0,S.MZ)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,S.MZ)({type:Boolean})],key:"hideClearIcon",value:function(){return!1}},{kind:"field",decorators:[(0,S.MZ)({attribute:"item-label-path"})],key:"itemLabelPath",value:function(){return"friendly_name"}},{kind:"field",decorators:[(0,S.wk)()],key:"_opened",value:function(){return!1}},{kind:"field",decorators:[(0,S.P)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"method",key:"open",value:(i=(0,l.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.open();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{kind:"method",key:"focus",value:(n=(0,l.A)((0,o.A)().mark((function e(){var t;return(0,o.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.updateComplete;case 2:return e.next=4,null===(t=this.comboBox)||void 0===t?void 0:t.focus();case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"field",key:"_initedStates",value:function(){return!1}},{kind:"field",key:"_states",value:function(){return[]}},{kind:"field",key:"_rowRenderer",value:function(){var e=this;return function(t){return(0,D.qy)(V||(V=(0,s.A)(['<ha-list-item graphic="avatar" .twoline="','"> '," <span>",'</span> <span slot="secondary">',"</span> </ha-list-item>"])),!!t.entity_id,t.state?(0,D.qy)($||($=(0,s.A)(['<state-badge slot="graphic" .stateObj="','" .hass="','"></state-badge>'])),t,e.hass):"",t.friendly_name,t.entity_id.startsWith(R)?e.hass.localize("ui.components.entity.entity-picker.new_entity"):t.entity_id)}}},{kind:"field",key:"_getStates",value:function(){var e=this;return(0,B.A)((function(t,n,i,a,s,o,l,u,d,c){var h=[];if(!n)return[];var f,y=Object.keys(n.states),v=null!=c&&c.length?c.map((function(e){var t=n.localize("ui.components.entity.entity-picker.create_helper",{domain:(0,L.z)(e)?n.localize("ui.panel.config.helpers.types.".concat(e)):(0,W.p$)(n.localize,e)});return{entity_id:R+e,state:"on",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:t,attributes:{icon:"mdi:plus"},strings:[e,t]}})):[];if(!y.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_entities"),attributes:{friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_entities"),icon:"mdi:magnify"},strings:[]}].concat((0,r.A)(v));if(u)return(y=y.filter((function(t){return e.includeEntities.includes(t)}))).map((function(e){var t=(0,I.u)(n.states[e])||e;return Object.assign(Object.assign({},n.states[e]),{},{friendly_name:t,strings:[e,t]})})).sort((function(t,n){return(0,q.S)(t.friendly_name,n.friendly_name,e.hass.locale.language)}));if(d&&(y=y.filter((function(e){return!d.includes(e)}))),i&&(y=y.filter((function(e){return i.includes((0,O.m)(e))}))),a&&(y=y.filter((function(e){return!a.includes((0,O.m)(e))}))),h=y.map((function(e){var t=(0,I.u)(n.states[e])||e;return Object.assign(Object.assign({},n.states[e]),{},{friendly_name:t,strings:[e,t]})})).sort((function(t,n){return(0,q.S)(t.friendly_name,n.friendly_name,e.hass.locale.language)})),o&&(h=h.filter((function(t){return t.entity_id===e.value||t.attributes.device_class&&o.includes(t.attributes.device_class)}))),l&&(h=h.filter((function(t){return t.entity_id===e.value||t.attributes.unit_of_measurement&&l.includes(t.attributes.unit_of_measurement)}))),s&&(h=h.filter((function(t){return t.entity_id===e.value||s(t)}))),!h.length)return[{entity_id:"",state:"",last_changed:"",last_updated:"",context:{id:"",user_id:null,parent_id:null},friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_match"),attributes:{friendly_name:e.hass.localize("ui.components.entity.entity-picker.no_match"),icon:"mdi:magnify"},strings:[]}].concat((0,r.A)(v));null!=v&&v.length&&(f=h).push.apply(f,(0,r.A)(v));return h}))}},{kind:"method",key:"shouldUpdate",value:function(e){return!!(e.has("value")||e.has("label")||e.has("disabled"))||!(!e.has("_opened")&&this._opened)}},{kind:"method",key:"willUpdate",value:function(e){var t;(!this._initedStates||e.has("_opened")&&this._opened)&&(this._states=this._getStates(this._opened,this.hass,this.includeDomains,this.excludeDomains,this.entityFilter,this.includeDeviceClasses,this.includeUnitOfMeasurement,this.includeEntities,this.excludeEntities,this.createDomains),this._initedStates&&(this.comboBox.filteredItems=this._states),this._initedStates=!0),e.has("createDomains")&&null!==(t=this.createDomains)&&void 0!==t&&t.length&&this.hass.loadFragmentTranslation("config")}},{kind:"method",key:"render",value:function(){return(0,D.qy)(T||(T=(0,s.A)([' <ha-combo-box item-value-path="entity_id" .itemLabelPath="','" .hass="','" .value="','" .label="','" .helper="','" .allowCustomValue="','" .filteredItems="','" .renderer="','" .required="','" .disabled="','" @opened-changed="','" @value-changed="','" @filter-changed="','"> </ha-combo-box> '])),this.itemLabelPath,this.hass,this._value,void 0===this.label?this.hass.localize("ui.components.entity.entity-picker.entity"):this.label,this.helper,this.allowCustomEntity,this._states,this._rowRenderer,this.required,this.disabled,this._openedChanged,this._valueChanged,this._filterChanged)}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_valueChanged",value:function(e){var t,n=this;e.stopPropagation();var i=null===(t=e.detail.value)||void 0===t?void 0:t.trim();if(i&&i.startsWith(R)){var a=i.substring(23);(0,F.$)(this,{domain:a,dialogClosedCallback:function(e){e.entityId&&n._setValue(e.entityId)}})}else i!==this._value&&this._setValue(i)}},{kind:"method",key:"_filterChanged",value:function(e){var t=e.target,n=e.detail.value.trim().toLowerCase();t.filteredItems=n.length?(0,P.H)(n,this._states):this._states}},{kind:"method",key:"_setValue",value:function(e){var t=this;this.value=e,setTimeout((function(){(0,E.r)(t,"value-changed",{value:e}),(0,E.r)(t,"change")}),0)}}]}}),D.WF),i(),e.next=74;break;case 71:e.prev=71,e.t2=e.catch(0),i(e.t2);case 74:case"end":return e.stop()}}),e,null,[[0,71]])})));return function(t,n){return e.apply(this,arguments)}}())},29371:function(e,t,n){n.d(t,{QC:function(){return r},fK:function(){return a},p$:function(){return i}});n(50693);var i=function(e,t,n){return e("component.".concat(t,".title"))||(null==n?void 0:n.name)||t},a=function(e,t){var n={type:"manifest/list"};return t&&(n.integrations=t),e.callWS(n)},r=function(e,t){return e.callWS({type:"manifest/get",integration:t})}},23680:function(e,t,n){n.d(t,{$:function(){return r}});n(95737),n(39790),n(66457),n(99019),n(96858);var i=n(50880),a=function(){return Promise.all([n.e(9381),n.e(6129)]).then(n.bind(n,4353))},r=function(e,t){(0,i.r)(e,"show-dialog",{dialogTag:"dialog-helper-detail",dialogImport:a,dialogParams:t})}}}]);
//# sourceMappingURL=2775.rxF-SkbIzhg.js.map