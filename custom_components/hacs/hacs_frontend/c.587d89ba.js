import{Q as s,S as e,T as t,V as r}from"./main-a0d7432d.js";import{b as l,d as n,u as o,m as a,c as i}from"./c.fbd8d2ba.js";const f=(s,e,t)=>{const r=new Map;for(let l=e;l<=t;l++)r.set(s[l],l);return r},u=s(class extends e{constructor(s){if(super(s),s.type!==t.CHILD)throw Error("repeat() can only be used in text expressions")}dt(s,e,t){let r;void 0===t?t=e:void 0!==e&&(r=e);const l=[],n=[];let o=0;for(const e of s)l[o]=r?r(e,o):o,n[o]=t(e,o),o++;return{values:n,keys:l}}render(s,e,t){return this.dt(s,e,t).values}update(s,[e,t,u]){var d;const c=l(s),{values:h,keys:p}=this.dt(e,t,u);if(!Array.isArray(c))return this.at=p,h;const v=null!==(d=this.at)&&void 0!==d?d:this.at=[],y=[];let m,b,x=0,g=c.length-1,j=0,k=h.length-1;for(;x<=g&&j<=k;)if(null===c[x])x++;else if(null===c[g])g--;else if(v[x]===p[j])y[j]=n(c[x],h[j]),x++,j++;else if(v[g]===p[k])y[k]=n(c[g],h[k]),g--,k--;else if(v[x]===p[k])y[k]=n(c[x],h[k]),o(s,y[k+1],c[x]),x++,k--;else if(v[g]===p[j])y[j]=n(c[g],h[j]),o(s,c[x],c[g]),g--,j++;else if(void 0===m&&(m=f(p,j,k),b=f(v,x,g)),m.has(v[x]))if(m.has(v[g])){const e=b.get(p[j]),t=void 0!==e?c[e]:null;if(null===t){const e=o(s,c[x]);n(e,h[j]),y[j]=e}else y[j]=n(t,h[j]),o(s,c[x],t),c[e]=null;j++}else a(c[g]),g--;else a(c[x]),x++;for(;j<=k;){const e=o(s,y[k+1]);n(e,h[j]),y[j++]=e}for(;x<=g;){const s=c[x++];null!==s&&a(s)}return this.at=p,i(s,y),r}});export{u as c};
